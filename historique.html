<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historique - Troupe Saint Elme</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="historique.css">
    <link rel="icon" href="images/embleme troupe.png">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <!-- FontAwesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <img style="right:20px" src="images/embleme troupe.png" alt="Emblème troupe">
        <img style="left:20px" src="images/logo fédération.png" alt="Logo fédération">
        <h1>Troupe Saint Elme</h1>
        <nav>
            <ul>
                <li><a href="https://javabatchcss.github.io/Troupe-Saint-Elme/index.html">Accueil</a></li>
                <li><a href="https://javabatchcss.github.io/Troupe-Saint-Elme/annee_2023.html">2023</a></li>
                <li><a href="https://javabatchcss.github.io/Troupe-Saint-Elme/annee_2024.html">2024</a></li>
                <li><a href="https://javabatchcss.github.io/Troupe-Saint-Elme/annee_2025.html">2025</a></li>
                <li style="width: 20px;"></li>
                <li><a href="historique.html" class="active">Historique</a></li>
                <li><a href="https://javabatchcss.github.io/Troupe-Saint-Elme/about-us.html">À Propos</a></li>
                <li><a href="https://javabatchcss.github.io/Troupe-Saint-Elme/contact-us.html">Contact</a></li>
                <li><a href="https://javabatchcss.github.io/Troupe-Saint-Elme/documentation.html">Documentation</a></li>
                <li><a href="https://www.fsggb.fr/">Site de la Fédération</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <!-- Section d'authentification administrateur (visible uniquement avant connexion) -->
        <section id="auth-section" class="contenu-principal">
            <h2>Espace Administrateur</h2>
            <div id="login-form">
                <input type="email" id="email" placeholder="Email administrateur" />
                <input type="password" id="password" placeholder="Mot de passe" />
                <button id="login-btn">Se connecter</button>
                <p id="auth-error" class="error-message"></p>
            </div>
        </section>

        <!-- Barre d'outils d'édition (visible uniquement pour l'administrateur) -->
        <section id="editor-toolbar" class="editor-toolbar hidden">
            <div class="toolbar-group">
                <button id="save-btn" title="Enregistrer les modifications"><i class="fas fa-save"></i></button>
                <button id="undo-btn" title="Annuler (Ctrl+Z)"><i class="fas fa-undo"></i></button>
                <button id="redo-btn" title="Rétablir (Ctrl+Y)"><i class="fas fa-redo"></i></button>
            </div>
            <div class="toolbar-group">
                <button id="bold-btn" title="Gras"><i class="fas fa-bold"></i></button>
                <button id="italic-btn" title="Italique"><i class="fas fa-italic"></i></button>
                <button id="underline-btn" title="Souligné"><i class="fas fa-underline"></i></button>
            </div>
            <div class="toolbar-group">
                <button id="h1-btn" title="Titre 1">H1</button>
                <button id="h2-btn" title="Titre 2">H2</button>
                <button id="h3-btn" title="Titre 3">H3</button>
            </div>
            <div class="toolbar-group">
                <button id="align-left-btn" title="Aligner à gauche"><i class="fas fa-align-left"></i></button>
                <button id="align-center-btn" title="Centrer"><i class="fas fa-align-center"></i></button>
                <button id="align-right-btn" title="Aligner à droite"><i class="fas fa-align-right"></i></button>
            </div>
            <div class="toolbar-group">
                <button id="list-ul-btn" title="Liste à puces"><i class="fas fa-list-ul"></i></button>
                <button id="list-ol-btn" title="Liste numérotée"><i class="fas fa-list-ol"></i></button>
            </div>
            <div class="toolbar-group">
                <button id="image-btn" title="Ajouter une image"><i class="fas fa-image"></i></button>
                <input type="file" id="image-upload" accept="image/*" style="display: none;">
                <button id="link-btn" title="Ajouter un lien"><i class="fas fa-link"></i></button>
            </div>
            <div class="toolbar-group">
                <button id="add-year-btn" title="Ajouter une année"><i class="fas fa-plus-circle"></i> Année</button>
            </div>
            <div class="toolbar-group">
                <button id="logout-btn" title="Se déconnecter"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </section>

        <!-- Conteneur principal du contenu éditable -->
        <section id="content-container" class="contenu-principal">
            <h2>Historique de la Troupe Saint Elme</h2>
            
            <!-- Le contenu sera chargé dynamiquement depuis Firebase -->
            <div id="editable-content" class="content-view">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i> Chargement du contenu...
                </div>
            </div>
        </section>

        <!-- Template pour ajouter une nouvelle année -->
        <template id="year-template">
            <div class="year-section" data-year="">
                <div class="year-header">
                    <h3 contenteditable="true" class="year-title">Année XXXX</h3>
                    <div class="year-actions admin-only">
                        <button class="move-up-btn" title="Déplacer vers le haut"><i class="fas fa-arrow-up"></i></button>
                        <button class="move-down-btn" title="Déplacer vers le bas"><i class="fas fa-arrow-down"></i></button>
                        <button class="delete-year-btn" title="Supprimer cette année"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
                <div class="year-content" contenteditable="true">
                    <p>Ajoutez ici le contenu pour cette année...</p>
                </div>
            </div>
        </template>
    </main>

    <footer>
        <p>&copy; Troupe Saint Elme</p>
    </footer>

    <!-- Modales pour différentes fonctionnalités -->
    <div id="image-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Insérer une image</h3>
            <div class="upload-container">
                <input type="file" id="modal-image-upload" accept="image/*">
                <div class="preview-container">
                    <img id="image-preview" src="#" alt="Aperçu" style="display: none;">
                </div>
                <label>Texte alternatif (alt):</label>
                <input type="text" id="image-alt" placeholder="Description de l'image">
                <div class="modal-actions">
                    <button id="insert-image-btn">Insérer</button>
                    <button class="cancel-btn">Annuler</button>
                </div>
            </div>
        </div>
    </div>

    <div id="link-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Insérer un lien</h3>
            <div>
                <label>Texte du lien:</label>
                <input type="text" id="link-text" placeholder="Texte à afficher">
                <label>URL:</label>
                <input type="url" id="link-url" placeholder="https://exemple.com">
                <div class="modal-actions">
                    <button id="insert-link-btn">Insérer</button>
                    <button class="cancel-btn">Annuler</button>
                </div>
            </div>
        </div>
    </div>

    <div id="year-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Ajouter une nouvelle année</h3>
            <div>
                <label>Année:</label>
                <input type="number" id="new-year-input" min="1900" max="2100" placeholder="AAAA">
                <div class="modal-actions">
                    <button id="create-year-btn">Créer</button>
                    <button class="cancel-btn">Annuler</button>
                </div>
            </div>
        </div>
    </div>

    <script src="historique.js"></script>
</body>
</html>
